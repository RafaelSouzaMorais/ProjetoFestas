Pular para o conteúdo Histórico de chats Você disse: eu queria fazer meu sistema
de reserva de mesas para uma festa, selecionar o local a partir de uma imagem,
colocando elementos pelo x e y da umagem via html e css O ChatGPT disse:
Perfeito, Fael — vou te dar um exemplo completo e responsivo que você pode
copiar/colar e adaptar. A ideia: a imagem fica dentro de um contêiner position:
relative. os “pontos” (mesas/elementos) são position: absolute com left/top em
percentual (assim funcionam com redimensionamento). ao clicar na imagem pegamos
as coords relativas (0–100%) e colocamos um marcador. cada marcador guarda {
xPercent, yPercent, id } — pronto pra salvar no backend. Segue um exemplo
mínimo, funcional e comentado (HTML + CSS + JS). Copia num arquivo .html e abre
no navegador:

<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mapa de Mesas - Seleção por imagem</title>
    <style>
      body {
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        padding: 20px;
        background: #f7f7f7;
      }
      .stage {
        max-width: 1000px;
        margin: 0 auto;
      }
      .image-wrap {
        position: relative;
        display: inline-block;
        width: 100%;
        max-width: 900px;
        border: 1px solid #ddd;
        background: #fff;
      }

      /* imagem responsiva */
      .image-wrap img {
        display: block;
        width: 100%;
        height: auto;
        user-select: none;
        -webkit-user-drag: none;
      }

      /* camada de overlay para receber cliques / conter marcadores */
      .overlay {
        position: absolute;
        inset: 0; /* top:0; right:0; bottom:0; left:0 */
        pointer-events: none; /* permitir cliques passarem para a imagem */
      }

      /* estilo do marcador (mesa) */
      .marker {
        position: absolute;
        transform: translate(
          -50%,
          -100%
        ); /* ancoragem no ponto - acima do ponto */
        width: 2vw;
        height: 2vw;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8vw;
        font-weight: 600;
        cursor: pointer;
        background: #2b8aef; /* azul padrão */
        color: white;
      }

      .marker.selected {
        background: #e63946;
      } /* quando reservado/selecionado */

      .controls {
        margin-top: 12px;
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }
      button {
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid #ccc;
        background: #fff;
        cursor: pointer;
      }
      button.primary {
        background: #2b8aef;
        color: white;
        border-color: #2573d9;
      }
      .list {
        margin-top: 12px;
        background: #fff;
        padding: 8px;
        border: 1px solid #eee;
        border-radius: 6px;
      }
      .hint {
        color: #666;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div class="stage">
      <h2>Mapa da festa — clique para adicionar uma mesa</h2>
      <div class="image-wrap" id="imageWrap">
        <!-- troque a src pela imagem do seu salão/plant e ajuste alt -->
        <img
          id="mapImage"
          src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=example"
          alt="Mapa do salão"
        />
        <div class="overlay" id="overlay"></div>
      </div>

      <div class="controls">
        <button id="toggleAdd" class="primary">Modo: Adicionar</button>
        <button id="export">Exportar JSON</button>
        <button id="clear">Limpar marcadores</button>
        <div class="hint">
          Clique na imagem para criar um marcador. Clique no marcador para
          alternar reservado/não.
        </div>
      </div>

      <div class="list" id="list"></div>
    </div>

    <script>
      // estado
      const markers = []; // {id, x, y, reserved}
      let addMode = true;
      let nextId = 1;

      const overlay = document.getElementById("overlay");
      const img = document.getElementById("mapImage");
      const listEl = document.getElementById("list");
      const toggleBtn = document.getElementById("toggleAdd");

      // calcula coords percentuais a partir de evento de clique
      function getClickPercent(evt) {
        const xPct = (evt.offsetX / evt.target.offsetWidth) * 100;
        const yPct = (evt.offsetY / evt.target.offsetHeight) * 100;
        return { xPct, yPct };
      }

      // cria visual de marcador e adiciona eventos
      function renderMarker(marker) {
        const el = document.createElement("div");
        el.className = "marker" + (marker.reserved ? " selected" : "");
        el.dataset.id = marker.id;
        el.style.left = marker.x + "%";
        el.style.top = marker.y + "%";
        el.title = `Mesa ${marker.id} — ${
          marker.reserved ? "Reservada" : "Livre"
        }`;
        el.textContent = marker.id;

        // clique no marcador: alterna reservado
        el.addEventListener("click", (e) => {
          e.stopPropagation(); // não aciona o clique da imagem
          marker.reserved = !marker.reserved;
          el.classList.toggle("selected", marker.reserved);
          el.title = `Mesa ${marker.id} — ${
            marker.reserved ? "Reservada" : "Livre"
          }`;
          refreshList();
        });

        // arrastar simples (mousedown -> move -> mouseup)
        let dragging = false;
        let startRect;
        function onMouseDown(e) {
          e.stopPropagation();
          dragging = true;
          startRect = img.getBoundingClientRect();
          document.addEventListener("mousemove", onMouseMove);
          document.addEventListener("mouseup", onMouseUp);
          el.style.transition = "none";
        }
        function onMouseMove(e) {
          if (!dragging) return;
          const x = e.clientX - startRect.left;
          const y = e.clientY - startRect.top;
          const xPct = Math.max(0, Math.min(100, (x / startRect.width) * 100));
          const yPct = Math.max(0, Math.min(100, (y / startRect.height) * 100));
          marker.x = xPct;
          marker.y = yPct;
          el.style.left = marker.x + "%";
          el.style.top = marker.y + "%";
          refreshList();
        }
        function onMouseUp() {
          if (!dragging) return;
          dragging = false;
          document.removeEventListener("mousemove", onMouseMove);
          document.removeEventListener("mouseup", onMouseUp);
          el.style.transition = "";
        }
        el.addEventListener("mousedown", onMouseDown);

        overlay.appendChild(el);
        marker.el = el;
      }

      // adiciona um marcador novo no local percentual
      function addMarker(xPct, yPct) {
        const marker = { id: nextId++, x: xPct, y: yPct, reserved: false };
        markers.push(marker);
        renderMarker(marker);
        refreshList();
      }

      // remove todos
      function clearMarkers() {
        markers.forEach((m) => {
          if (m.el && m.el.parentNode) m.el.parentNode.removeChild(m.el);
        });
        markers.length = 0;
        nextId = 1;
        refreshList();
      }

      // atualiza lista visível de marcadores (JSON resumido)
      function refreshList() {
        listEl.innerHTML = "<strong>Marcadores:</strong><br>";
        if (markers.length === 0) {
          listEl.innerHTML += "<em>Nenhum</em>";
          return;
        }
        // tabela simples
        const ul = document.createElement("ul");
        markers.forEach((m) => {
          const li = document.createElement("li");
          li.textContent = `Mesa ${m.id}: x=${m.x.toFixed(1)}% y=${m.y.toFixed(
            1
          )}% — ${m.reserved ? "Reservada" : "Livre"}`;
          ul.appendChild(li);
        });
        listEl.appendChild(ul);
        // botão enviar demo
      }

      // clique na imagem para adicionar (quando em modo adicionar)
      img.addEventListener("click", (evt) => {
        if (!addMode) return;
        const { xPct, yPct } = getClickPercent(evt);
        addMarker(xPct, yPct);
      });

      // alterna modo
      toggleBtn.addEventListener("click", () => {
        addMode = !addMode;
        toggleBtn.textContent = addMode ? "Modo: Adicionar" : "Modo: Navegar";
        toggleBtn.classList.toggle("primary", addMode);
      });

      // exporta JSON (exemplo de envio para backend)
      document.getElementById("export").addEventListener("click", async () => {
        const payload = markers.map((m) => ({
          id: m.id,
          xPercent: +m.x.toFixed(2),
          yPercent: +m.y.toFixed(2),
          reserved: m.reserved,
        }));
        const json = JSON.stringify(payload, null, 2);

        // mostra no console / prompt — no real app aqui você faria fetch POST
        console.log("payload", payload);
        alert("JSON copiado para o console. Veja console do devtools.");

        // exemplo de envio (descomente e ajuste sua rota)
        /*
    try {
      const res = await fetch('/api/mesas', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error('Erro ao enviar');
      alert('Salvo com sucesso');
    } catch (err) {
      alert('Erro: ' + err.message);
    }
    */
      });

      document.getElementById("clear").addEventListener("click", () => {
        if (!confirm("Remover todos os marcadores?")) return;
        clearMarkers();
      });

      // redimensionamento: os marcadores são posicionados em % então não precisa recalcular
      // mas se você quiser redesenhar (por exemplo se usar um canvas), escute resize:
      window.addEventListener("resize", () => {
        // nada obrigatório aqui
      });

      // inicial
      refreshList();
    </script>
  </body>
</html>
Observações e próximos passos sugeridos Uso de % garante responsividade. Se
preferir coordenadas fixas no backend, salve xPercent e yPercent e reaplique na
renderização. Para maior precisão (ex.: rotação da imagem/zoom), considere usar
um
<svg>
  sobreposto em vez de divs, ou um canvas (mas canvas precisa redesenhar). Se
  quiser zonas clicáveis com formas (mesa retangular/oval), usar SVG
  <rect>
    /
    <ellipse>
      facilita detectar interseção e transformar/rotacionar. Para salvar no
      backend: ao exportar envie [{id, xPercent, yPercent, reserved}] e no load
      do mapa recrie os marcadores. Se precisar que cada mesa tenha
      capacidade/nome/foto, armazene metadados junto ao marcador e mostre um
      modal ao clicar. Quer que eu adapte o exemplo para: arrastar por toque
      móvel, selecionar uma imagem customizada (upload), ou persistir via API
      (ex.: ASP.NET/C#)? Posso gerar o endpoint e o JSON de exemplo pra você.
      Quer que eu gere a versão com upload de imagem (usuário sobe a planta) e
      persistência via um endpoint C# (controller minimal API) já pronto? Nenhum
      arquivo escolhidoNenhum arquivo escolhido O ChatGPT pode cometer erros.
      Por isso, lembre-se de conferir informações relevantes.
    </ellipse>
  </rect>
</svg>
